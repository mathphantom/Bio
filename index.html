<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amino Acids Quiz</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --correct-color: #2ecc71;
            --wrong-color: #e74c3c;
            --neutral-color: #ecf0f1;
            --text-color: #2c3e50;
            --light-text: #7f8c8d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--primary-color);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .quiz-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            margin-bottom: 30px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .progress-container {
            width: 100%;
            background-color: var(--neutral-color);
            border-radius: 20px;
            margin: 20px 0;
            height: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--secondary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        .question {
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .creative-question {
            color: var(--secondary-color);
        }

        .options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .option {
            padding: 15px;
            background-color: var(--neutral-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .option:hover {
            background-color: #dfe6e9;
            transform: translateY(-2px);
        }

        .option.selected {
            border-color: var(--secondary-color);
            background-color: rgba(52, 152, 219, 0.1);
        }

        .option.correct {
            background-color: rgba(46, 204, 113, 0.2);
            border-color: var(--correct-color);
        }

        .option.wrong {
            background-color: rgba(231, 76, 60, 0.2);
            border-color: var(--wrong-color);
        }

        .feedback {
            margin: 20px 0;
            padding: 15px;
            border-radius: var(--border-radius);
            display: none;
        }

        .feedback.correct {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--correct-color);
            border: 1px solid var(--correct-color);
            display: block;
        }

        .feedback.wrong {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--wrong-color);
            border: 1px solid var(--wrong-color);
            display: block;
        }

        .btn {
            padding: 12px 24px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background-color: var(--light-text);
            cursor: not-allowed;
            transform: none;
        }

        .btn-next {
            background-color: var(--secondary-color);
        }

        .btn-prev {
            background-color: var(--light-text);
        }

        .btn-submit {
            background-color: var(--accent-color);
        }

        .btn-restart {
            background-color: var(--primary-color);
        }

        .results {
            text-align: center;
            display: none;
        }

        .score {
            font-size: 2rem;
            margin: 20px 0;
            color: var(--primary-color);
        }

        .score-details {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .score-item {
            padding: 15px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            min-width: 120px;
        }

        .score-value {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .score-label {
            color: var(--light-text);
            font-size: 0.9rem;
        }

        .correct-value {
            color: var(--correct-color);
        }

        .wrong-value {
            color: var(--wrong-color);
        }

        .total-value {
            color: var(--primary-color);
        }

        .question-indicator {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 20px 0;
            justify-content: center;
        }

        .indicator {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: var(--neutral-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .indicator.current {
            background-color: var(--secondary-color);
            color: white;
        }

        .indicator.answered {
            background-color: rgba(52, 152, 219, 0.3);
        }

        .indicator.correct {
            background-color: var(--correct-color);
            color: white;
        }

        .indicator.wrong {
            background-color: var(--wrong-color);
            color: white;
        }

        .difficulty {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 10px;
            color: white;
        }

        .difficulty.easy {
            background-color: #27ae60;
        }

        .difficulty.medium {
            background-color: #f39c12;
        }

        .difficulty.hard {
            background-color: #e74c3c;
        }

        .detailed-results {
            margin-top: 40px;
            text-align: left;
        }

        .detailed-results h3 {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }

        .result-question-item {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
        }

        .result-question-item p {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .result-question-item .user-answer,
        .result-question-item .correct-answer {
            font-size: 1rem;
            margin-bottom: 5px;
            padding-left: 15px;
        }

        .result-question-item .user-answer.wrong-answer {
            color: var(--wrong-color);
            font-weight: bold;
        }

        .result-question-item .correct-answer {
            color: var(--correct-color);
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .quiz-container {
                padding: 20px;
            }

            .question {
                font-size: 1.1rem;
            }

            .score-details {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .score-item {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Amino Acids Quiz</h1>
            <p class="subtitle">An interactive quiz covering all aspects of amino acid metabolism</p>
        </header>

        <div class="quiz-container" id="quiz-container">
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>

            <div class="question-indicator" id="question-indicator"></div>

            <div id="question-container">
                <div class="question" id="question-text"></div>
                <div class="options" id="options-container"></div>
                <div class="feedback" id="feedback"></div>
            </div>

            <div class="controls">
                <button class="btn btn-prev" id="prev-btn" disabled>Previous</button>
                <button class="btn btn-next" id="next-btn" disabled>Next</button>
                <button class="btn btn-submit" id="submit-btn" style="display: none;">Finish Quiz</button>
            </div>
        </div>

        <div class="results" id="results">
            <h2>Quiz Results</h2>
            <div class="score" id="score-text"></div>
            <div class="score-details">
                <div class="score-item">
                    <div class="score-value correct-value" id="correct-count">0</div>
                    <div class="score-label">Correct Answers</div>
                </div>
                <div class="score-item">
                    <div class="score-value wrong-value" id="wrong-count">0</div>
                    <div class="score-label">Wrong Answers</div>
                </div>
                <div class="score-item">
                    <div class="score-value total-value" id="total-count">50</div>
                    <div class="score-label">Total Questions</div>
                </div>
            </div>
            <button class="btn btn-restart" id="restart-btn">Restart Quiz</button>

            <div class="detailed-results" id="detailed-results">
                <h3>Detailed Results</h3>
            </div>
        </div>
    </div>

    <script>
        // Question data
        const questions = [
            {
                question: "Which of the following amino acids is NOT considered essential in the human body?",
                options: ["Leucine", "Methionine", "Glycine", "Threonine"],
                correctAnswer: 2,
                difficulty: "easy"
            },
            {
                question: "What enzyme is responsible for converting serine to glycine in the biosynthesis of glycine?",
                options: ["Threonine aldolase", "Glycine synthase", "Serine hydroxymethyltransferase", "Glycine oxidase"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "Which of the following compounds is NOT formed from glycine as one of its components?",
                options: ["Bile salts", "Creatine", "Heme", "Melanin"],
                correctAnswer: 3,
                difficulty: "medium"
            },
            {
                question: "Which amino acid participates in the first step of heme synthesis?",
                options: ["Alanine", "Glycine", "Cysteine", "Glutamine"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Excessive conversion of glyoxylic acid to oxalic acid by oxidation leads to a genetic condition called:",
                options: ["Homocystinuria", "Cystinuria", "Primary hyperoxaluria", "Phenylketonuria"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "Which of the following amino acids is considered glucogenic because it yields pyruvic acid?",
                options: ["Threonine", "Methionine", "Serine", "Leucine"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "Serine participates in the synthesis of which of the following compounds?",
                options: ["Creatine", "Collagen", "Sphingosine", "Melatonin"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "Which of the following amino acids contains sulfur and is considered essential?",
                options: ["Cysteine", "Methionine", "Glycine", "Serine"],
                correctAnswer: 1,
                difficulty: "easy"
            },
            {
                question: "Methionine is activated to a compound that acts as a methyl donor in many reactions. What is the name of this compound?",
                options: ["S-adenosylhomocysteine", "S-adenosylmethionine (SAM)", "Homocysteine", "Cystathionine"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "What is the cause of Homocystinuria?",
                options: ["Deficiency of phenylalanine hydroxylase enzyme", "Deficiency of cystathionine synthase enzyme", "Deficiency of homogentisic acid oxidase enzyme", "Deficiency of tyrosinase enzyme"],
                correctAnswer: 1,
                difficulty: "hard"
            },
            {
                question: "Which of the following compounds is cysteine a component of?",
                options: ["Creatinine", "Glutathione", "Noradrenaline", "Serotonin"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Cystinuria is characterized by increased excretion of cystine and dibasic amino acids in the urine due to a defect in renal tubular reabsorption. Which of the following amino acids is a dibasic amino acid affected in this condition?",
                options: ["Alanine", "Valine", "Lysine", "Proline"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "Which of the following amino acids is considered non-essential and can be synthesized from oxaloacetic acid?",
                options: ["Aspartic acid", "Glutamic acid", "Arginine", "Histidine"],
                correctAnswer: 0,
                difficulty: "medium"
            },
            {
                question: "Aspartic acid participates in the synthesis of which of the following compounds?",
                options: ["Purines and pyrimidines", "Creatine and creatinine", "Heme and glutathione", "Melanin and serotonin"],
                correctAnswer: 0,
                difficulty: "medium"
            },
            {
                question: "Which of the following amino acids acts as an excitatory neurotransmitter?",
                options: ["Glycine", "GABA", "Glutamic acid", "Serotonin"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "What is the amino acid from which GABA (gamma-aminobutyric acid), an inhibitory neurotransmitter, is formed?",
                options: ["Aspartic acid", "Glutamic acid", "Glycine", "Alanine"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "In case of vitamin B6 deficiency, GABA formation is inhibited, which may lead to:",
                options: ["Increased homocysteine excretion", "Kidney stone formation", "Convulsions", "Albinism"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "Which of the following amino acids is considered semi-essential and glucogenic, yielding glutamic acid during catabolism?",
                options: ["Arginine", "Lysine", "Histidine", "Tyrosine"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "What is the compound formed during histidine catabolism that increases in urine in case of folic acid deficiency?",
                options: ["Uric acid", "FIGLU (formiminoglutamate)", "Histamine", "Carnosine"],
                correctAnswer: 1,
                difficulty: "hard"
            },
            {
                question: "Which of the following compounds is formed from histidine and acts as an antioxidant, protecting the liver and red blood cells from the effect of free radicals?",
                options: ["Histamine", "Carnosine", "Ergothioneine", "Anserine"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "Which of the following amino acids is considered essential, basic, and semi-essential?",
                options: ["Lysine", "Arginine", "Histidine", "Ornithine"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Nitric oxide (NO) acts as a neurotransmitter and causes vasodilation and smooth muscle relaxation. What is the amino acid from which nitric oxide is formed?",
                options: ["Glutamic acid", "Aspartic acid", "Arginine", "Glycine"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "Which of the following aromatic amino acids is considered essential?",
                options: ["Tyrosine", "Phenylalanine", "Tryptophan", "Both b and c are correct"],
                correctAnswer: 3,
                difficulty: "medium"
            },
            {
                question: "Phenylalanine and tyrosine are considered glucogenic and ketogenic amino acids. What are their final catabolic products?",
                options: ["Pyruvic acid and acetyl CoA", "Succinyl CoA and acetoacetate", "Fumaric acid and acetoacetyl CoA", "Alanine and acetoacetate"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "What is the enzyme responsible for converting phenylalanine to tyrosine?",
                options: ["Tyrosine aminotransferase", "Phenylalanine hydroxylase", "Homogentisic acid oxidase", "Tyrosinase"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Which of the following hormones are synthesized from tyrosine in the follicular cells of the thyroid gland?",
                options: ["Adrenaline and noradrenaline", "Melatonin and serotonin", "Thyroid hormones (T3, T4)", "Cortisol and aldosterone"],
                correctAnswer: 2,
                difficulty: "medium"
            },
            {
                question: "Catecholamines (adrenaline and noradrenaline) are catabolized by the MAO enzyme with the formation of a compound that increases in urine in cases of adrenal medulla tumors (pheochromocytoma). What is the name of this compound?",
                options: ["Homogentisic acid", "Phenylpyruvic acid", "3-methoxy-4-hydroxymandelic acid (VMA)", "5-hydroxyindoleacetic acid"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "What is the enzyme whose deficiency leads to Albinism?",
                options: ["Phenylalanine hydroxylase", "Homogentisic acid oxidase", "Tyrosine aminotransferase", "Tyrosinase"],
                correctAnswer: 3,
                difficulty: "medium"
            },
            {
                question: "Which of the following amino acids is considered essential, glucogenic, and ketogenic, yielding alanine and acetoacetate?",
                options: ["Phenylalanine", "Tyrosine", "Tryptophan", "Lysine"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "Tryptophan is converted into several important biological substances. Which of the following compounds is NOT formed from tryptophan?",
                options: ["Nicotinic acid (Vitamin B3)", "Melatonin hormone", "Serotonin neurotransmitter", "GABA neurotransmitter"],
                correctAnswer: 3,
                difficulty: "medium"
            },
            {
                question: "What is the genetic disease characterized by a defect in the renal tubular reabsorption of tryptophan and basic amino acids (histidine and lysine)?",
                options: ["Maple Syrup Urine Disease", "Hartnup disease", "Cystinuria", "Phenylketonuria"],
                correctAnswer: 1,
                difficulty: "hard"
            },
            {
                question: "The putrefaction of tryptophan produces two compounds that give urine and feces their characteristic odor and color. What are the names of these two compounds?",
                options: ["Indole and skatole", "Phenol and cresol", "Putrescine and cadaverine", "Tyramine and histamine"],
                correctAnswer: 0,
                difficulty: "medium"
            },
            {
                question: "Which of the following amino acids is considered essential and ketogenic, yielding acetoacetate?",
                options: ["Valine", "Leucine", "Isoleucine", "Lysine"],
                correctAnswer: 3,
                difficulty: "medium"
            },
            {
                question: "Lysine participates in the formation of which of the following important structural proteins?",
                options: ["Keratin and elastin", "Collagen and elastin", "Actin and myosin", "Fibrinogen and thrombin"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Lysine is also important as a precursor for the synthesis of a compound necessary for the transport of fatty acids into the mitochondria for oxidation. What is the name of this compound?",
                options: ["Creatine", "Carnitine", "Choline", "Betaine"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Which of the following Branched-Chain Amino Acids (BCAA) is considered only glucogenic and yields succinyl CoA?",
                options: ["Valine", "Leucine", "Isoleucine", "Both a and c are correct"],
                correctAnswer: 0,
                difficulty: "medium"
            },
            {
                question: "Which of the following Branched-Chain Amino Acids (BCAA) is considered only ketogenic and yields acetoacetate?",
                options: ["Valine", "Leucine", "Isoleucine", "Both a and c are correct"],
                correctAnswer: 1,
                difficulty: "medium"
            },
            {
                question: "Which of the following Branched-Chain Amino Acids (BCAA) is considered both glucogenic and ketogenic, yielding succinyl CoA and acetyl CoA?",
                options: ["Valine", "Leucine", "Isoleucine", "Both a and c are correct"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "The metabolism of Branched-Chain Amino Acids (BCAA) primarily occurs in the following tissues EXCEPT:",
                options: ["Muscles", "Brain", "Liver", "Adipose tissue"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "What is the cause of Maple Syrup Urine Disease?",
                options: ["Deficiency of alpha-keto acid decarboxylase enzyme", "Deficiency of branched-chain amino acid decarboxylase enzyme", "Deficiency of branched-chain amino acid transaminase enzyme", "Deficiency of branched-chain amino acid oxidase enzyme"],
                correctAnswer: 1,
                difficulty: "hard"
            },
            {
                question: "Imagine you are the enzyme Serine Hydroxymethyltransferase. What is your main job in a living cell?",
                options: ["Linking amino acids to form proteins", "Converting serine to glycine", "Breaking down proteins into amino acids", "Adding a methyl group to methionine"],
                correctAnswer: 1,
                difficulty: "medium",
                isCreative: true
            },
            {
                question: "If glycine is the basic building block of a biological skyscraper (collagen), what is the approximate percentage of this block in each floor (helix)?",
                options: ["1/2", "1/3", "1/4", "1/10"],
                correctAnswer: 1,
                difficulty: "medium",
                isCreative: true
            },
            {
                question: "In the world of amino acids, if S-adenosylmethionine (SAM) is the mailman, what is the message it carries and delivers?",
                options: ["An amino acid", "A methyl group", "Energy (ATP)", "An electron"],
                correctAnswer: 1,
                difficulty: "medium",
                isCreative: true
            },
            {
                question: "Imagine Homocystinuria is a problem in the biological plumbing system. What is the faulty part that leads to the accumulation of homocysteine?",
                options: ["The pump that transports homocysteine", "The valve that converts homocysteine to cystathionine", "The filter that removes homocysteine from the blood", "The tube that reabsorbs homocysteine in the kidneys"],
                correctAnswer: 1,
                difficulty: "hard",
                isCreative: true
            },
            {
                question: "If Branched-Chain Amino Acids (BCAA) are special fuel for muscles and the brain, why can't the liver use this fuel as efficiently as these tissues?",
                options: ["Because the liver prefers to use only glucose", "Because the liver lacks the necessary enzymes to fully metabolize them", "Because branched-chain amino acids are toxic to the liver", "Because the liver stores branched-chain amino acids instead of metabolizing them"],
                correctAnswer: 1,
                difficulty: "hard",
                isCreative: true
            },
            {
                question: "In the story of Maple Syrup Urine Disease, what is the villain that accumulates and causes the characteristic odor and health problems?",
                options: ["The branched-chain amino acids themselves", "The alpha-keto acids resulting from branched-chain amino acids", "The alpha-keto acid decarboxylase enzyme", "A compound called maple syrup"],
                correctAnswer: 1,
                difficulty: "hard",
                isCreative: true
            },
            {
                question: "Which of the following is a non-protein amino acid that participates in the formation of carnosine, anserine, and pantothenic acid?",
                options: ["Ornithine", "Citrulline", "Beta-alanine", "Glycine"],
                correctAnswer: 2,
                difficulty: "hard"
            },
            {
                question: "Which of the following non-protein amino acids is an intermediate in the urea cycle?",
                options: ["Beta-alanine and ornithine", "Ornithine and citrulline", "Citrulline and beta-alanine", "Ornithine, beta-alanine, and citrulline"],
                correctAnswer: 1,
                difficulty: "hard"
            },
            {
                question: "Which amino acid is considered essential and glucogenic because it yields succinyl CoA?",
                options: ["Leucine", "Isoleucine", "Valine", "Methionine"],
                correctAnswer: 3,
                difficulty: "medium"
            },
            {
                question: "Which of the following amino acids is considered both glucogenic and ketogenic, yielding fumaric acid and acetoacetyl CoA?",
                options: ["Phenylalanine", "Tyrosine", "Tryptophan", "Both a and b are correct"],
                correctAnswer: 3,
                difficulty: "hard"
            }
        ];

        // Global variables
        let currentQuestionIndex = 0;
        let userAnswers = new Array(questions.length).fill(null);
        let quizSubmitted = false;

        // DOM elements
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const progressBar = document.getElementById('progress-bar');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');
        const feedback = document.getElementById('feedback');
        const quizContainer = document.getElementById('quiz-container');
        const resultsContainer = document.getElementById('results');
        const scoreText = document.getElementById('score-text');
        const correctCount = document.getElementById('correct-count');
        const wrongCount = document.getElementById('wrong-count');
        const totalCount = document.getElementById('total-count');
        const restartBtn = document.getElementById('restart-btn');
        const questionIndicator = document.getElementById('question-indicator');
        const detailedResultsContainer = document.getElementById('detailed-results');

        // Initialize quiz
        function initQuiz() {
            userAnswers = new Array(questions.length).fill(null);
            quizSubmitted = false;
            currentQuestionIndex = 0;
            
            // Create question indicators
            questionIndicator.innerHTML = '';
            for (let i = 0; i < questions.length; i++) {
                const indicator = document.createElement('div');
                indicator.className = 'indicator';
                indicator.textContent = i + 1;
                indicator.addEventListener('click', () => {
                    if (!quizSubmitted) {
                        goToQuestion(i);
                    }
                });
                questionIndicator.appendChild(indicator);
            }
            
            // Show first question
            showQuestion(currentQuestionIndex);
            
            // Reset UI
            quizContainer.style.display = 'block';
            resultsContainer.style.display = 'none';
            detailedResultsContainer.innerHTML = '<h3>Detailed Results</h3>'; // Clear previous detailed results
            updateProgressBar();
            updateButtons();
        }

        // Show current question
        function showQuestion(index) {
            const question = questions[index];
            
            // Update question indicators
            const indicators = questionIndicator.querySelectorAll('.indicator');
            indicators.forEach((ind, i) => {
                ind.className = 'indicator';
                if (i === index) {
                    ind.classList.add('current');
                }
                if (userAnswers[i] !== null) {
                    ind.classList.add('answered');
                }
                if (quizSubmitted) {
                    if (userAnswers[i] === questions[i].correctAnswer) {
                        ind.classList.add('correct');
                    } else if (userAnswers[i] !== null) {
                        ind.classList.add('wrong');
                    }
                }
            });
            
            // Display question
            if (question.isCreative) {
                questionText.innerHTML = `<span class="difficulty ${question.difficulty}">
                    ${question.difficulty === 'easy' ? 'Easy' : question.difficulty === 'medium' ? 'Medium' : 'Hard'}
                </span>
                <span class="creative-question">(Creative Question)</span> ${question.question}`;
            } else {
                questionText.innerHTML = `<span class="difficulty ${question.difficulty}">
                    ${question.difficulty === 'easy' ? 'Easy' : question.difficulty === 'medium' ? 'Medium' : 'Hard'}
                </span> ${question.question}`;
            }
            
            // Display options
            optionsContainer.innerHTML = '';
            question.options.forEach((option, i) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = `${String.fromCharCode(97 + i)}) ${option}`;
                
                // Add appropriate classes if quiz is submitted
                if (quizSubmitted) {
                    if (i === question.correctAnswer) {
                        optionElement.classList.add('correct');
                    } else if (i === userAnswers[index]) {
                        optionElement.classList.add('wrong');
                    }
                } else if (userAnswers[index] === i) {
                    optionElement.classList.add('selected');
                }
                
                // Add click event listener
                optionElement.addEventListener('click', () => {
                    if (!quizSubmitted) {
                        selectOption(i);
                    }
                });
                
                optionsContainer.appendChild(optionElement);
            });
            
            // Display feedback if quiz is submitted
            if (quizSubmitted) {
                if (userAnswers[index] === question.correctAnswer) {
                    feedback.textContent = 'Correct answer!';
                    feedback.className = 'feedback correct';
                } else {
                    feedback.textContent = `Wrong answer. The correct answer is: ${String.fromCharCode(97 + question.correctAnswer)}) ${question.options[question.correctAnswer]}`;
                    feedback.className = 'feedback wrong';
                }
            } else {
                feedback.textContent = '';
                feedback.className = 'feedback';
            }
            
            updateButtons();
        }

        // Select an answer
        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            
            // Update UI
            const options = optionsContainer.querySelectorAll('.option');
            options.forEach((option, i) => {
                if (i === optionIndex) {
                    option.classList.add('selected');
                } else {
                    option.classList.remove('selected');
                }
            });
            
            // Enable next button
            nextBtn.disabled = false;
            
            // Update progress bar
            updateProgressBar();
        }

        // Go to next question
        function nextQuestion() {
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
            }
        }

        // Go to previous question
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion(currentQuestionIndex);
            }
        }

        // Go to specific question
        function goToQuestion(index) {
            currentQuestionIndex = index;
            showQuestion(currentQuestionIndex);
        }

        // Update progress bar
        function updateProgressBar() {
            const answeredCount = userAnswers.filter(answer => answer !== null).length;
            const progressPercentage = (answeredCount / questions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        // Update button states
        function updateButtons() {
            prevBtn.disabled = currentQuestionIndex === 0;
            
            if (quizSubmitted) {
                nextBtn.disabled = currentQuestionIndex === questions.length - 1;
                submitBtn.style.display = 'none';
            } else {
                nextBtn.disabled = userAnswers[currentQuestionIndex] === null;
                
                // Show submit button on last question if all questions are answered
                if (currentQuestionIndex === questions.length - 1) {
                    const allAnswered = userAnswers.every(answer => answer !== null);
                    submitBtn.style.display = allAnswered ? 'block' : 'none';
                    nextBtn.style.display = 'none';
                } else {
                    submitBtn.style.display = 'none';
                    nextBtn.style.display = 'block';
                }
            }
        }

        // Submit quiz
        function submitQuiz() {
            quizSubmitted = true;
            
            // Calculate score
            let correctAnswers = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === questions[index].correctAnswer) {
                    correctAnswers++;
                }
            });
            
            // Display results
            const percentage = Math.round((correctAnswers / questions.length) * 100);
            scoreText.textContent = `${percentage}%`;
            correctCount.textContent = correctAnswers;
            wrongCount.textContent = questions.length - correctAnswers;
            totalCount.textContent = questions.length;
            
            // Populate detailed results
            detailedResultsContainer.innerHTML = '<h3>Detailed Results</h3>'; // Clear previous results
            questions.forEach((question, index) => {
                const questionItem = document.createElement('div');
                questionItem.classList.add('result-question-item');

                const questionTextElement = document.createElement('p');
                questionTextElement.textContent = `Question ${index + 1}: ${question.question}`;
                questionItem.appendChild(questionTextElement);

                const userAnswerElement = document.createElement('div');
                const userAnswer = userAnswers[index];
                if (userAnswer !== null) {
                    userAnswerElement.textContent = `Your Answer: ${String.fromCharCode(97 + userAnswer)}) ${question.options[userAnswer]}`;
                    if (userAnswer !== question.correctAnswer) {
                        userAnswerElement.classList.add('user-answer', 'wrong-answer');
                    } else {
                        userAnswerElement.classList.add('user-answer');
                    }
                } else {
                    userAnswerElement.textContent = 'Your Answer: Not answered';
                    userAnswerElement.classList.add('user-answer', 'wrong-answer');
                }
                questionItem.appendChild(userAnswerElement);

                const correctAnswerElement = document.createElement('div');
                correctAnswerElement.textContent = `Correct Answer: ${String.fromCharCode(97 + question.correctAnswer)}) ${question.options[question.correctAnswer]}`;
                correctAnswerElement.classList.add('correct-answer');
                questionItem.appendChild(correctAnswerElement);

                detailedResultsContainer.appendChild(questionItem);
            });

            // Update UI
            quizContainer.style.display = 'none';
            resultsContainer.style.display = 'block';
        }

        // Restart quiz
        function restartQuiz() {
            initQuiz();
        }

        // Add event listeners
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        submitBtn.addEventListener('click', submitQuiz);
        restartBtn.addEventListener('click', restartQuiz);

        // Start the quiz
        initQuiz();
    </script>
</body>
</html>

